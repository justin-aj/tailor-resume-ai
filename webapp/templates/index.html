<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Tailor AI - ATS Optimization Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Header -->
            <div class="col-12">
                <nav class="navbar navbar-dark bg-primary">
                    <div class="container-fluid">
                        <span class="navbar-brand mb-0 h1">
                            <i class="fas fa-file-alt me-2"></i>Resume Tailor AI
                        </span>
                        <span class="navbar-text">
                            ATS-Optimized Resume Builder
                        </span>
                    </div>
                </nav>
            </div>
        </div>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="row mt-3">
                    <div class="col-12">
                        {% for category, message in messages %}
                            <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} alert-dismissible fade show" role="alert">
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        {% endwith %}

        <!-- Main Form -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-edit me-2"></i>AI Prompt Generator</h4>
                        <p class="mb-0 text-muted">Generate a complete prompt with your inputs for AI services like ChatGPT or Claude</p>
                    </div>
                    <div class="card-body">
                        <form action="{{ url_for('process_resume') }}" method="POST" id="resumeForm">
                            
                            <!-- Job Description -->
                            <div class="mb-4">
                                <label for="job_description" class="form-label">
                                    <i class="fas fa-briefcase me-2"></i>Job Description *
                                </label>
                                <textarea class="form-control" id="job_description" name="job_description" 
                                         rows="8" required placeholder="Paste the complete job description here...">{{ job_description or '' }}</textarea>
                                <div class="form-text">Paste the full job posting to optimize your resume for this specific role.</div>
                            </div>

                            <!-- LaTeX Resume -->
                            <div class="mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <label for="latex_resume" class="form-label mb-0">
                                        <i class="fas fa-code me-2"></i>LaTeX Resume Code *
                                    </label>
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="updateLatexBtn">
                                            <i class="fas fa-download me-1"></i>Load from File
                                        </button>
                                        <button type="button" class="btn btn-outline-primary btn-sm" id="saveLatexBtn">
                                            <i class="fas fa-save me-1"></i>Save to File
                                        </button>
                                    </div>
                                </div>
                                <div class="position-relative">
                                    <textarea class="form-control font-monospace" id="latex_resume" name="latex_resume" 
                                             rows="15" required placeholder="Paste your complete LaTeX resume code here...">{{ latex_resume or '' }}</textarea>
                                </div>
                                <div class="form-text">
                                    <strong>Note:</strong> Pre-filled with data_science_resume.tex. Use "Load" to refresh from file or "Save" to update the file.
                                </div>
                            </div>

                            <!-- Additional Information -->
                            <div class="mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <label for="additional_info" class="form-label mb-0">
                                        <i class="fas fa-plus-circle me-2"></i>Additional CV Information
                                    </label>
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="updateResumeBtn">
                                            <i class="fas fa-download me-1"></i>Load from File
                                        </button>
                                        <button type="button" class="btn btn-outline-primary btn-sm" id="saveResumeBtn">
                                            <i class="fas fa-save me-1"></i>Save to File
                                        </button>
                                    </div>
                                </div>
                                <textarea class="form-control" id="additional_info" name="additional_info" 
                                         rows="6" placeholder="Add extra skills, projects, or experiences not in your current resume...">{{ additional_info or '' }}</textarea>
                                <div class="form-text">Pre-filled with resume.txt. Use "Load" to refresh from file or "Save" to update the file.</div>
                            </div>

                            <!-- Submit Button -->
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
                                    <i class="fas fa-magic me-2"></i>Generate AI Prompt
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instructions -->
        <div class="row mt-4 mb-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-info-circle me-2"></i>How It Works</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="text-center">
                                    <i class="fas fa-paste fa-3x text-primary mb-3"></i>
                                    <h6>1. Input Your Data</h6>
                                    <p class="text-muted">Enter job description, LaTeX resume, and additional info.</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center">
                                    <i class="fas fa-robot fa-3x text-success mb-3"></i>
                                    <h6>2. Generate Prompt</h6>
                                    <p class="text-muted">Get a complete prompt formatted for AI services.</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center">
                                    <i class="fas fa-copy fa-3x text-info mb-3"></i>
                                    <h6>3. Copy & Paste</h6>
                                    <p class="text-muted">Copy the prompt and paste it into ChatGPT, Claude, etc.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
